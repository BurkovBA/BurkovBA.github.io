---
title: Популярная статья о распределенных вычислительных системах, блокчейне и криптографии в контексте выборов
date: "2021-09-25T00:00:00.284Z"
tags: ["people", "programming"]
cover: "./Basil_II.jpeg"
description: В контексте прошедших выборов многие люди, не являющиеся техническими специалистами, заинтересовались тематикой блокчейна, криптографии и т.п. Меня попросили подготовить популярную статью на эту тему.
---

Общие
=====

Что такое блокчейн? Что такое алгоритмы консенсуса в блокчейне? Почему его невозможно «обмануть»? Как в блокчейне используется криптография?
--------------------------------------------------------------------------------------------------------------------------------------------

Блокчейн - это распределенная отказоустойчивая база транзакций, основанная на криптографии и распределенном консенсусе. Чтобы объяснить, какую проблему решает блокчейн, мне придется сделать небольшое погружение в историю.

Подобно тому, как "крестным отцом" науки о нейронных сетях является Джеффри Хинтон, "крестным отцом" науки о распределенном консенсусе является американский теоретик вычислительных систем Лессли Лэмпорт, занявшийся проблемой консенсуса в распределенных вычислительных системах в 1970 - 1980-ые в связи с необходимостью создания отказоустойчивых систем управления для космических спутников. 

Чтобы популяризовать свои идеи, Лэмпорт любил придумывать им звучные названия. Проиллюстрировать суть распределенного консенсуса Лэмпорт решил, сформулировав проблему Византийских Генералов. Скорее всего, он имел слабое представление об истории Византии, и сначала [хотел назвать данную задачу проблемой албанских генералов](https://lamport.azurewebsites.net/pubs/pubs.html#trans). Почему албанских? А почему бы и нет, как говорил Роберт Де Ниро в ["Хвост виляет собакой"](https://en.wikipedia.org/wiki/Wag_the_Dog). Позднее Лэмпорту все-таки указали, что не совсем вежливо называть вымышленную проблему именем реально существующей страны, и он переименовал генералов в византийских, что оказалось крайне удачным названием с исторической точки зрения.

Итак, что такое задача византийских генералов или византийских отказов?

Предположим, что на дворе - конец X века, армия византийского императора Василия II Болгаробойцы под командованием нескольких генералов ведет осаду болгарской крепости. 

Задача императора - написать устав для солдат, который бы обеспечивал синхронность действий армии. То есть все солдаты в армии должны следовать одному приказу - дружно наступать или дружно отступать, несогласованность приведет к поражению. Решению этой задачи мешают два препятствия.

Препятствие 1: недостаточно просто назначить одного генерала постоянным главнокомандующим. Любой из генералов во время боя может оказаться недоступен, временно (отрезан в пылу сражения) или постоянно (убит). 

Поэтому каждый солдат в армии, принимая решение, что ему делать в данный момент, ориентируется на всех (или хотя бы нескольких) генералов одновременно. Предположим, в армии - семь генералов. Если пять говорят “наступать”, один - “отступать” (может быть, потому что он не может адекватно оценить обстановку со своей позиции, а может он - предатель), и еще один недоступен, то солдаты считают, что между пятью генералами все еще достигнут кворум, и следует дружно наступать.

Препятствие 2: Византийские генералы склонны к предательству. Это похоже на игру в мафию: все генералы делают вид, что верны византийской государственности, но в самый ответственный момент готовятся осуществить мятеж (образовать кворум с приказом “отступать”, когда на самом деле следовало “наступать”), привести армию к поражению в войне и узурпировать власть в Византии. Мятежников, как правило, все-таки меньшинство. Например, предположим, что трое из семи генералов в армии Василия - Варда Фока, Варда Склир и Миахил Бурцес - втайне готовят мятеж и ведут двойную игру.

Соответственно, устав Василия II должен минимизировать риск, что им удастся добиться успеха. Существует целый ряд алгоритмов обеспечения такого консенсуса.



Что такое хеш-функция? Что такое публичный и приватный ключ? Что такое HMAC-подпись?
------------------------------------------------------------------------------------

Предположим, преданный византийский генерал Дамиан Далассен хочет послать императору Василию II письмо с информацией о своих планах, однако дорога, по которой проезжал его гонец, оказалось под контролем предателей Фоки, Склира и Бурцеса, и те подменили гонца, исправив в документе слово "наступать" на слово "отступать". Последствия могут оказаться катастрофическими. Как императору защититься от такой ситуации?

На помощь приходят два инструмента: хеш-функции и криптография на асимметричных ключах.

Хеш-функция - это функция, которая принимает на вход текст, и возвращает короткую последовательность символов заданной длины, обычно что-то вроде 64 символов. Дословно хеш - это "терка", то есть вы как бы натираете свой длинный документ на терку, и получаете бессмысленную, но очень короткую последовательность символов на выходе.

Главная ценность хеш-функции состоит в том, что с помощью нее можно быстро проверять, совпадают ли два текста. Вместо того, чтобы сравнивать сами тексты, вы можете вычислить хеш-функцию от каждого из них и сравнить их между собой. 

Если мятежные генералы изменят что-то в тексте документа, хеш от него изменится. Факт различия хешей двух документов гарантирует, что эти документы - разные. 

Но, возможно, мятежные генералы могут подобрать такой набор модификаций, что текст изменится, а хеш от него будет таким же (это называется коллизия)? Это зависит от конкретной хеш-функции, которая используется. Хеш-функции, для которых практически невозможно подобрать второй текст, хеш от которого совпадает с хешем от данного, называются [криптографически стойкими](https://ru.wikipedia.org/wiki/%D0%9A%D1%80%D0%B8%D0%BF%D1%82%D0%BE%D0%B3%D1%80%D0%B0%D1%84%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F_%D1%85%D0%B5%D1%88-%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F).

Хорошо, а как теперь гарантировать, что изменники не сочинят новый текст с нуля и не снабдят его хешем? Для этого используется криптография на асимметричных ключах.

Вкратце, генерал Далассен выпускает пару ключей, приватный (иногда также называемый секретным, это синонимы) и публичный. Приватный ключ он надежно хранит у себя, публичный же раздает всем и каждому, включая императора, конечно.

Ключи можно использовать для шифрования текста. Текст, зашифрованный приватным ключом, можно расшифровать с помощью публичного. Текст, зашифрованный публичным ключом, можно расшифровать с помощью приватного.

Смысл этой конструкции в том, что если у вас получается расшифровать некий шифротекст публичным ключом Делассена, вы можете быть уверены, что зашифровать этот текст мог только обладатель приватного ключа Делассена (то есть только сам Делассен, если, конечно, он бережно хранит свой приватный ключ).

Таким образом, чтобы гарантировать целостность документа, следует поступить так. Делассен вычисляет хеш от своего текста, шифрует его своим приватным ключом и прикладывает шифрованный хеш к тексту.

Император расшифровывает хеш публичным ключом Делассена, и вычисляет хеш от документа. Если хеши совпадают, это гарантирует императору, что доставленный ему текст - это в точности тот текст, который отправлял Делассен, ведь не имея приватного ключа мятежники не смогли бы его подделать.


В контексте ДЭГ активно использовалось понятие «нода наблюдателя». Что такое ноды в блокчейне? 
----------------------------------------------------------------------------------------------

Нода - узел. Просто компьютер, на котором установлена программа для участия его в блокчейне.

В контексте ДЭГ


Существовали ли в истории случаи взлома блокчейна? Насколько вероятно, что современный блокчейн (вроде того, что использовался в ДЭГ) может быть сломан?
--------------------------------------------------------------------------------------------------------------------------------------------------------

TODO

Для достижения анонимности голосования в ДЭГ использовалось проксирование. Что из себя представляет прокси-сервер? Как он позволяет анонимизировать избирателей? Может ли прокси-сервер быть скомпрометирован?
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

TODO

Может ли блокчейн быть компрометирован извне?
---------------------------------------------

TODO


Вопросы про выборы
==================

Как применялась технология блокчейна к выборам? Известны ли вам случаи применения блокчейна к выборам в мире? 
-------------------------------------------------------------------------------------------------------------

TODO

Согласно сайту observer.mos.ru для ДЭГ была выбрана модель Public Permissioned на блокчейне Exonum с алгоритмом консенсуса PBFT (Practical Byzantine Fault Tolerance). В чем отличительные особенности модели Public Permissioned, блокчейна Exonum и алгоритма консенсуса PBFT от аналогов?
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

TODO

Может ли быть такое, что созданная система устойчива к атакам извне, однако неустойчива к классическим методам фальсификации: к каруселям, вбросам, удалению наблюдателей, использованию «исчезающих чернил», подкупу и шантажу избирателей? Может ли технология блокчейна обезопасить избирателей от какого-либо из этих происшествий? Может ли существовать в каком-либо виде электронная карусель, электронный вброс, электронные исчезающие чернила?
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

TODO

В случае, если на реальном участке происходит вброс — часто видны пачки бюллетеней в избирательных урнах. Если происходит карусель — на разных участках можно зарегистрировать одинаковых избирателей. Как, на ваш взгляд, технология блокчейна соотносится с прозрачностью голосования? Является ли ДЭГ более прозрачным, чем аналоговое голосование? 
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

TODO

Подведение итогов выборов в Москве затянулось на 14 часов. Официальная версия заключается в том, что полученная задержка была связана с переголосованием. Так как каждая транзакция анонимна, для вычисления переголосовавших потребовалось какое-то большое количество операций. Не могли бы вы прокомментировать, жизнеспособно ли такое объяснение? В чем заключаются технические сложности такого подсчёта голосов? Происходит ли на этом этапе их расшифровка?
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

TODO

Может ли блокчейн в каком-то виде хранить данные о переголосовавших? Как понять, кто переголосовал, в общем блокчейне?
----------------------------------------------------------------------------------------------------------------------

TODO

Блокчейн ДЭГ содержит несколько различных типов транзакций (расшифровка бюллетеня, прием бюллетеня и т.д). В чем отличие этих типов транзакций друг от друга, помимо поля с идентификатором транзакции? Может ли как-нибудь отличаться их обработка? 
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

TODO




Ссылки
------
 - https://lamport.azurewebsites.net/pubs/pubs.html#trans - автобиография Лессли Лэмпорта
